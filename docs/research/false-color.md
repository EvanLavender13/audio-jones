# False Color

Applies a color map to the image based on luminance, effectively replacing the original colors with a user-defined gradient or palette. Useful for thermal vision effects, psychedelic visualizations, or stylized data representation.

## Classification

- **Category**: TRANSFORMS â†’ Color
- **Core Operation**: Remap input luminance to a color sampled from a 1D Lookup Table (LUT)
- **Pipeline Position**: Transform stage (user-ordered)

## References

- [Wikipedia: False color](https://en.wikipedia.org/wiki/False_color) - General concept of mapping scalar values to colors
- [OpenGL Tutorial: Gradient Mapping](http://www.opengl-tutorial.org/) - Standard technique of using 1D textures for color ramps
- **Internal**: `src/render/color_lut.h` - Existing system for generating 1D textures from `ColorConfig`

## Algorithm

The shader samples the input texture, calculates its luminance, and uses that value as the U-coordinate to sample the 1D LUT texture.

```glsl
uniform sampler2D texture0; // Input image
uniform sampler2D texture1; // 1D Gradient LUT (generated by ColorLUT)

void main()
{
    vec4 color = texture(texture0, fragTexCoord);
    
    // Calculate luminance (perceived brightness)
    // Standard sRGB coefficients: 0.299, 0.587, 0.114
    float luma = dot(color.rgb, vec3(0.299, 0.587, 0.114));
    
    // Sample the gradient map
    // V-coordinate is 0.5 to sample the center of the 1D strip
    vec3 mappedColor = texture(texture1, vec2(luma, 0.5)).rgb;
    
    // Optional: Blend with original based on alpha/intensity?
    // For now, pure replacement:
    finalColor = vec4(mappedColor, color.a);
}
```

## Parameters

| Parameter | Type | Range | Effect |
|-----------|------|-------|--------|
| gradient | ColorConfig | N/A | Defines the color ramp (Solid, Rainbow, or Custom Gradient Stops) |
| opacity | float | 0.0-1.0 | Blend between original color and false color (optional) |

## Audio Mapping Ideas

- **Gradient Phase/Shift**: Cycle the gradient colors based on beat or time.
- **Luminance Curve**: Adjust the input luminance (gamma/contrast) before mapping to "compress" or "expand" the color distribution based on volume.

## Notes

- **Reuse**: Utilizes the existing `ColorLUT` C++ component, which already handles texture generation and updates from `ColorConfig`.
- **Performance**: Very cheap (one extra texture lookup).
- **Flexibility**: Since `ColorConfig` supports "Rainbow" and "Solid" modes too, this single effect can act as a "Tint" filter (Solid) or a "Psychedelic" filter (Rainbow) in addition to custom Gradients.
